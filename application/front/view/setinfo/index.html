<!DOCTYPE html>
<html>
<head>
	<title>小幌疏我的信息</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="/bookstore/public/front/css/css.css">
	<link rel="stylesheet" type="text/css" href="/bookstore/public/front/css/public.css">
	<link rel="stylesheet" type="text/css" href="/bookstore/public/front/css/xhhindex.css">
	<link rel="stylesheet" type="text/css" href="/bookstore/public/front/fontawesome/css/all.css">
</head>
<body>
	<!-- 顶部 -->
	{include file="../application/front/view/common/header.html"}
	<!-- end -->

	<!-- 头部logo 搜索栏 -->
	{include file="../application/front/view/common/searchbox.html"}
	<!-- end -->
	<div class="order-box1">
		<div class="f1">
			<!-- 左侧菜单栏 -->
			<div class="f1-left mb-20">
				<div class="f1-left-title">个人中心</div>
				<ul class="left-box1 fz-14">
					<li class="item"><a href="{:Url('Information/index')}">我的信息</a></li>
					<li class="item"><a href="{:Url('Order/index')}">我的订单</a></li>
					<li class="item"><a href="">我的等级</a></li>
					<li class="item"><a href="">我的积分</a></li>
					<li class="item"><a href="{:Url('Collect/index')}">我的收藏</a></li>
				</ul>
				<ul class="left-box1 fz-14">
					<li class="item"><a href="{:Url('Address/index')}">我的收货地址</a></li>
					<li class="item" style="border-left: 2px #2db4ea solid;"><a href="{:Url('Setinfo/index')}">个人设置</a></li>
				</ul>
			</div>			
			<!-- end -->
			<div class="personal-list-item ml-10 bd-1-e8 fl">
				<ul>
					<li class="list-item active">
						<div class="set-info mb-20">
							<h3 class="list-item-title bb-1-e8">个人设置</h3>
							<div class="set-info-table bc-f3 mt-10 pd-10 bd-1-e8">
								<table width="100%" border="0" cellpadding="0" cellspacing="0">
									<tbody class="fz-14">
										<tr>
											<td class="pr-15" height="28" align="right">昵称：</td>
											<td id="name">{$customer['name']}</td>
											<td width="15%" align="right" colspan="2"><a class="edit" href="javascript:void(0);" title="编辑">编辑</a></td>
										</tr>
										<tr>
											<td class="pr-15" width="15%" height="28" align="right">手机号：</td>
											<td>
												{$customer['phone']}
											</td>											
										</tr>
										<tr>
											<td class="pr-15" height="28" align="right">账号：</td>
											<td id="account">{$Think.session.account}</td>
										</tr>
										<tr>
											<td class="pr-15" height="28" align="right">性别：</td>
											{switch name="customer.sex"}
												{case value="1"}<td id="sex">男</td>{/case}
												{case value="2"}<td id="sex">女</td>{/case}
											{/switch}
										</tr>
										<tr>
											<td class="pr-15" height="28" align="right">邮箱：</td>
											<td id="email">{$customer['email']}</td>
										</tr>										
									</tbody>
								</table>
							</div>
							<!-- 编辑个人设置页 -->
							<form class="set-info-form" action="javascript:void(0);" id="edit-form">
								<ul class="mt-20">
									<li>
										<div class="fl mr-20 lh-28 ta-right wd-80">
											<label for="user-name-rel">昵称</label></div>
											<div class="fl">
												<input id="name" class="wd-158 bd-1-e8 br-4 lh-28" type="text" name="name" value="{$customer['name']}">
												<input id="customerId" class="wd-158 bd-1-e8 br-4 lh-28" type="hidden" name="customerId" value="{$customer['customerId']}">
											</div>
											<div class="cb"></div>
										</li>
										<li class="mt-10">
											<div class="fl mr-20 lh-28 ta-rt wd-80"><label>性别</label></div>
											<div class="fl lh-28">
												<label class="user-lable">
													<span style="cursor:pointer" class="icon-checkbox-line2" data-sex="1" ></span>
													<span class="cl-21">&nbsp;男</span>
													<input name="sex" class="hidden" type="radio" value="1">
												</label>
												<label class="user-lable">
													<span style="cursor:pointer" class="icon-checkbox-line" data-sex="2"></span>
													<span class="cl-21">&nbsp;女</span>
													<input name="sex" class="hidden" type="radio" value="2">
												</label>
											</div>
											<div class="cb"></div>
										</li>
										<li class="mt-10">
											<div class="fl mr-20 lh-28 ta-rt wd-80"><label>邮箱</label></div>
											<div class="fl lh-28">
												<input id="email" class="wd-158 bd-1-e8 br-4 lh-28" type="text" name="email" value="{$customer['email']}">
											</div>
											<div class="cb"></div>
										</li>
										<li class="mt-10">
											<div class="fl mr-20 lh-28 ta-rt wd-80"><label>手机号码</label></div>
											<div class="fl lh-28">
												<input id="phone" class="wd-158 bd-1-e8 br-4 lh-28" type="text" name="phone" value="{$customer['phone']}">
											</div>
											<div class="cb"></div>
										</li>
										<li class="mt-40">
											<div class="fl mr-20 lh-28 ta-rt wd-80">&nbsp;</div>
											<div class="fl">
												<a class="btn-save lh-28 ta-ct bd-1-e8 wd-78 br-4" href="javascript:void(0);" lay-filter="save" lay-submit="">保存</a>
											</div>
											<div class="cb"></div>
										</li>
									</ul>
								</form>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<div class="cb"></div>
		</div>
	</div>
	<!-- 尾部 -->
	{include file="../application/front/view/common/footer.html"}
	<!-- end -->
	<script src="/bookstore/public/front/AmazeUI/assets/js/jquery.min.js"></script>
	<script type="text/javascript" src="/bookstore/public/xhh-admin/lib/layui/layui.js" charset="utf-8"></script>
	<script type="text/javascript">
		/*编辑个人信息*/
		$('.set-info-table').on('click','.edit',function(){
			$('.set-info-table').addClass('hide');
			$('.set-info-form').addClass('active');
		});

		$('.set-info-form .user-lable').on('click', 'input', function () {			
			$(this).prop('checked', true);
			$(this).parent().siblings('.user-lable').find('input').prop('checked', false);        
		});
	</script>
	<script>
		layui.use(['form','layer'], function(){
			$ = layui.jquery;
			var form = layui.form
			,layer = layui.layer;

          //监听提交
          form.on('submit(save)', function(data){
          	console.log(data);
            //发异步，把数据提交给php
            $.ajax({
            	async: false,
            	type: "POST",
            	url:'{:Url('Setinfo/update')}',
            	contentType : "application/x-www-form-urlencoded; charset=utf-8",
            	data:$("#edit-form").serialize(),
            	dataType: "text",
            	success: function () {
            		layer.alert("保存成功", {icon: 6});
            	},
            	error: function () {
            		layer.alert("保存失败", {icon: 5});
            	}
            })
            return false;
        });
      });
		
	</script>
</body>
</html>